<widget-modal widget-modal-title="Configure CodeCoverage Widget" class="codeCoverage-config">
    <form name="configForm" role="form" ng-submit="codeCoverageConfig.submit(configForm.$valid)" novalidate="novalidate">
        <div class="form-group text-center" ng-class="{'has-error': configForm.collectorItemId.$invalid && codeCoverageConfig.submitted}">
            <select name="collectorItemId"
                    class="form-control"
                    ng-model="codeCoverageConfig.collectorItemId"
                    ng-options="item.name for item in codeCoverageConfig.buildJobs | orderBy: 'name' track by item.value"
                    ng-disabled="codeCoverageConfig.toolsDropdownDisabled"
                    required>
                <option value="">{{graphConfig.toolsDropdownPlaceholder}}</option>
            </select>

            <p class="help-block" ng-if="configForm.collectorItemId.$error.required">Please select a collector</p>
        </div>

        <div class="form-group text-center" ng-class="{'has-error': configForm.buildDurationThreshold.$invalid && codeCoverageConfig.submitted}">
            <label class="modal-label">Build duration threshold:</label>
            <input
                    type="text"
                    name="buildDurationThreshold"
                    class="form-control-inline text-center"
                    ng-model="codeCoverageConfig.buildDurationThreshold"
                    size="1"
                    minlength="1"
                    maxlength="3"
                    pattern="\d*\.?\d*"
                    required>&nbsp;&nbsp;&nbsp;minutes

            <p class="help-block" ng-if="configForm.buildDurationThreshold.$error.required">Build threshold is required</p>
            <p class="help-block" ng-if="configForm.buildDurationThreshold.$error.pattern">Please enter a number</p>
        </div>

        <hr/>

        <div class="form-group text-center" ng-class="{'has-error': configForm.buildConsecutiveFailureThreshold.$invalid && codeCoverageConfig.submitted}">
            <label class="modal-label">Alert takeover criteria:</label>
            <input
                    type="text"
                    name="buildConsecutiveFailureThreshold"
                    class="form-control-inline text-center"
                    ng-model="codeCoverageConfig.buildConsecutiveFailureThreshold"
                    size="1"
                    minlength="1"
                    maxlength="3"
                    pattern="\d*\.?\d*"
                    required>&nbsp;&nbsp;&nbsp;consecutive build fails

            <p class="help-block" ng-if="configForm.buildConsecutiveFailureThreshold.$error.required">Takeover criteria is required</p>
            <p class="help-block" ng-if="configForm.buildConsecutiveFailureThreshold.$error.pattern">Please enter a number</p>
        </div>

        <div class="button-row row text-center">
            <button type="submit" class="btn btn-primary btn-wide">Save</button>
        </div>
    </form>
</widget-modal> 
